{% extends 'core/base.html' %} 
{% block title %}Menu Item Management{% endblock %}

{% block content %}
    <h1 class="mb-4">üçî Menu Item & Stock Control</h1>
    
    <div class="d-flex justify-content-between mb-3">
        <a href="{% url 'manager_menu_add' %}" class="btn btn-success">+ Add New Item</a>
        <a href="{% url 'manager_category_add' %}" class="btn btn-outline-secondary">+ Add New Category</a>
    </div>

    <table class="table table-striped table-hover shadow-sm">
        <thead class="table-dark">
            <tr>
                <th>Item Name</th>
                <th>Category</th>
                <th>Price</th>
                <th>Stock</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for item in menu_items %}
            <tr>
                <td>{{ item.name }}</td>
                <td>{{ item.category.name }}</td>
                <td>TK{{ item.price|floatformat:2 }}</td>
                <td>
                    {% if item.stock_quantity <= 5 and item.stock_quantity > 0 %}
                        <span class="badge bg-warning">{{ item.stock_quantity }} (Low)</span>
                    {% elif item.stock_quantity == 0 %}
                        <span class="badge bg-danger">0 (Sold Out)</span>
                    {% else %}
                        <span class="badge bg-success">{{ item.stock_quantity }}</span>
                    {% endif %}
                </td>
                <td>
                    {% if item.is_available %}
                        <span class="badge bg-primary">Available</span>
                    {% else %}
                        <span class="badge bg-secondary">Hidden</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'manager_menu_edit' pk=item.pk %}" class="btn btn-sm btn-info text-white me-2">Edit/Stock</a>
                    
                    <a href="{% url 'menu_item_delete' pk=item.pk %}" class="btn btn-sm btn-danger">Delete</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <a href="{% url 'staff_dashboard' %}" class="btn btn-secondary mt-3">Back to Dashboard</a>
{% endblock content %}